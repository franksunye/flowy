# ğŸ§ª Flowy æµ‹è¯•é©±åŠ¨é‡æ„ç­–ç•¥

## ğŸ“Š å½“å‰æµ‹è¯•ç°çŠ¶

### âœ… å·²æœ‰æµ‹è¯•åŸºç¡€
- **ç«¯åˆ°ç«¯æµ‹è¯•**: 796è¡Œå®Œå–„çš„E2Eæµ‹è¯• (`tests/e2e-test.js`)
- **æµ‹è¯•é…ç½®**: å®Œæ•´çš„æµ‹è¯•å‚æ•°é…ç½® (`tests/test-config.js`)
- **æµ‹è¯•å·¥å…·**: æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…· (`tests/test-utils.js`)

### âŒ ç¼ºå¤±çš„æµ‹è¯•å±‚æ¬¡
- **å•å…ƒæµ‹è¯•**: å®Œå…¨ç¼ºå¤±
- **APIæµ‹è¯•**: åªæœ‰åŸºç¡€è°ƒç”¨æµ‹è¯•
- **é›†æˆæµ‹è¯•**: ç¼ºå°‘æ¨¡å—é—´é›†æˆæµ‹è¯•
- **æ€§èƒ½æµ‹è¯•**: æ— æ€§èƒ½åŸºå‡†æµ‹è¯•

## ğŸ¯ ä¸‰é˜¶æ®µæµ‹è¯•é©±åŠ¨é‡æ„è®¡åˆ’

### é˜¶æ®µ1: å»ºç«‹å®Œæ•´æµ‹è¯•åŸºçº¿ (2-3å‘¨)

#### 1.1 å»ºç«‹å•å…ƒæµ‹è¯•æ¡†æ¶
**ç›®æ ‡**: ä¸ºæ ¸å¿ƒç®—æ³•å»ºç«‹æµ‹è¯•åŸºç¡€

**æ ¸å¿ƒæµ‹è¯•å‡½æ•°**:
```javascript
// éœ€è¦æµ‹è¯•çš„æ ¸å¿ƒå‡½æ•°
- flowy() åˆå§‹åŒ–å‡½æ•°
- blockGrabbed() æ‹–æ‹½å¼€å§‹
- blockReleased() æ‹–æ‹½ç»“æŸ  
- blockSnap() å¸é™„é€»è¾‘
- å—åˆ›å»ºç®—æ³•
- å—é‡æ’ç®—æ³•
- æ•°æ®è¾“å‡ºç®—æ³•
```

**æµ‹è¯•æ¡†æ¶é€‰æ‹©**: Jest (æ˜“äºé…ç½®) æˆ– Vitest (æ›´ç°ä»£)

**æµ‹è¯•æ–‡ä»¶ç»“æ„**:
```
tests/
â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ initialization.test.js
â”‚   â”‚   â”œâ”€â”€ drag-drop.test.js
â”‚   â”‚   â”œâ”€â”€ snapping.test.js
â”‚   â”‚   â””â”€â”€ block-management.test.js
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ output.test.js
â”‚   â”‚   â””â”€â”€ delete.test.js
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ helpers.test.js
â”œâ”€â”€ integration/
â”‚   â”œâ”€â”€ drag-to-snap.test.js
â”‚   â””â”€â”€ workflow-creation.test.js
â”œâ”€â”€ performance/
â”‚   â”œâ”€â”€ drag-performance.test.js
â”‚   â””â”€â”€ memory-usage.test.js
â””â”€â”€ e2e/
    â””â”€â”€ e2e-test.js (ç°æœ‰)
```

#### 1.2 åˆ›å»ºAPIæµ‹è¯•å¥—ä»¶
**ç›®æ ‡**: è¯¦ç»†æµ‹è¯•æ‰€æœ‰Flowy APIæ–¹æ³•

**æµ‹è¯•è¦†ç›–**:
- `flowy.output()` - æ­£å¸¸æƒ…å†µã€ç©ºç”»å¸ƒã€å¤æ‚å·¥ä½œæµ
- `flowy.deleteBlocks()` - æ¸…ç†åŠŸèƒ½ã€çŠ¶æ€é‡ç½®
- è¾¹ç•Œæ¡ä»¶æµ‹è¯•
- é”™è¯¯å¤„ç†æµ‹è¯•

#### 1.3 å»ºç«‹æ€§èƒ½åŸºå‡†æµ‹è¯•
**ç›®æ ‡**: å»ºç«‹æ€§èƒ½åŸºå‡†ï¼Œç¡®ä¿é‡æ„ä¸é™ä½æ€§èƒ½

**å…³é”®æŒ‡æ ‡**:
- æ‹–æ‹½å“åº”æ—¶é—´ (< 16ms)
- å¸é™„è®¡ç®—æ—¶é—´ (< 50ms)
- å†…å­˜ä½¿ç”¨é‡
- DOMæ“ä½œé¢‘ç‡

#### 1.4 å¢å¼ºç«¯åˆ°ç«¯æµ‹è¯•è¦†ç›–
**ç›®æ ‡**: æ‰©å±•ç°æœ‰E2Eæµ‹è¯•

**æ–°å¢æµ‹è¯•åœºæ™¯**:
- è¾¹ç•Œæƒ…å†µ (ç”»å¸ƒè¾¹ç¼˜æ‹–æ‹½)
- é”™è¯¯åœºæ™¯ (æ— æ•ˆæ‹–æ‹½ç›®æ ‡)
- å¤§é‡å—çš„æ€§èƒ½æµ‹è¯•
- æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•

### é˜¶æ®µ2: æ¸è¿›å¼é‡æ„ (4-6å‘¨)

#### 2.1 æ¨¡å—åŒ–é‡æ„é˜¶æ®µ
**ç­–ç•¥**: å°†å•ä½“æ–‡ä»¶æ‹†åˆ†ä¸ºæ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½æœ‰å¯¹åº”æµ‹è¯•

**æ¨¡å—åˆ’åˆ†**:
```javascript
src/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ flowy.js (ä¸»å…¥å£)
â”‚   â”œâ”€â”€ drag-handler.js (æ‹–æ‹½å¤„ç†)
â”‚   â”œâ”€â”€ snap-engine.js (å¸é™„å¼•æ“)
â”‚   â””â”€â”€ block-manager.js (å—ç®¡ç†)
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ dom-utils.js (DOMæ“ä½œ)
â”‚   â”œâ”€â”€ math-utils.js (æ•°å­¦è®¡ç®—)
â”‚   â””â”€â”€ event-utils.js (äº‹ä»¶å¤„ç†)
â””â”€â”€ api/
    â”œâ”€â”€ output.js (æ•°æ®è¾“å‡º)
    â””â”€â”€ cleanup.js (æ¸…ç†åŠŸèƒ½)
```

**é‡æ„éªŒè¯æµç¨‹**:
1. ä¸ºæ¯ä¸ªæ¨¡å—ç¼–å†™å•å…ƒæµ‹è¯•
2. é‡æ„ä»£ç åˆ°æ¨¡å—
3. è¿è¡Œå•å…ƒæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£ç¡®
4. è¿è¡Œé›†æˆæµ‹è¯•ç¡®ä¿æ¨¡å—åä½œ
5. è¿è¡ŒE2Eæµ‹è¯•ç¡®ä¿æ•´ä½“åŠŸèƒ½
6. è¿è¡Œæ€§èƒ½æµ‹è¯•ç¡®ä¿æ€§èƒ½ä¸é™çº§

#### 2.2 ES6+è¯­æ³•è½¬æ¢é˜¶æ®µ
**ç­–ç•¥**: é€æ­¥ç°ä»£åŒ–è¯­æ³•ï¼Œæ¯æ¬¡è½¬æ¢åè¿è¡Œå…¨å¥—æµ‹è¯•

**è½¬æ¢ä¼˜å…ˆçº§**:
1. `var` â†’ `const/let`
2. å‡½æ•°è¡¨è¾¾å¼ â†’ ç®­å¤´å‡½æ•°
3. å­—ç¬¦ä¸²æ‹¼æ¥ â†’ æ¨¡æ¿å­—ç¬¦ä¸²
4. å¯¹è±¡æ“ä½œ â†’ è§£æ„èµ‹å€¼
5. æ•°ç»„æ“ä½œ â†’ ç°ä»£æ•°ç»„æ–¹æ³•

#### 2.3 ç§»é™¤jQueryä¾èµ–é˜¶æ®µ
**ç­–ç•¥**: é€æ­¥æ›¿æ¢jQueryä¸ºåŸç”ŸJS

**æ›¿æ¢è®¡åˆ’**:
1. DOMé€‰æ‹©å™¨ (`$()` â†’ `querySelector`)
2. äº‹ä»¶å¤„ç† (`$(document).on()` â†’ `addEventListener`)
3. CSSæ“ä½œ (`css()` â†’ `style` å±æ€§)
4. åŠ¨ç”»æ•ˆæœ (å¦‚æœæœ‰çš„è¯)

### é˜¶æ®µ3: ç°ä»£åŒ–å·¥å…·é“¾ (2-3å‘¨)

#### 3.1 å»ºç«‹ç°ä»£åŒ–æ„å»ºç³»ç»Ÿ
**é€‰æ‹©**: Vite (æ¨è) æˆ– Webpack

**åŠŸèƒ½**:
- çƒ­æ›´æ–°å¼€å‘æœåŠ¡å™¨
- ä»£ç åˆ†å‰²å’Œä¼˜åŒ–
- CSSé¢„å¤„ç†
- è‡ªåŠ¨åŒ–æµ‹è¯•é›†æˆ

#### 3.2 æ·»åŠ TypeScriptæ”¯æŒ
**ç­–ç•¥**: æ¸è¿›å¼ç±»å‹åŒ–

**æ­¥éª¤**:
1. æ·»åŠ åŸºç¡€ç±»å‹å®šä¹‰
2. è½¬æ¢æ ¸å¿ƒæ¨¡å—ä¸ºTS
3. æ·»åŠ ä¸¥æ ¼ç±»å‹æ£€æŸ¥
4. ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶

#### 3.3 é›†æˆCI/CDæµæ°´çº¿
**å¹³å°**: GitHub Actions

**æµæ°´çº¿**:
```yaml
# .github/workflows/test.yml
name: Test Suite
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm install
      - run: npm run test:unit
      - run: npm run test:integration  
      - run: npm run test:performance
      - run: npm run test:e2e
```

## ğŸ” æ¯æ­¥éªŒè¯ç­–ç•¥

### éªŒè¯é‡‘å­—å¡”
```
     E2E Tests (å°‘é‡ï¼Œé«˜ä»·å€¼)
    â†—              â†–
Integration Tests    Performance Tests
    â†—              â†–
  Unit Tests (å¤§é‡ï¼Œå¿«é€Ÿ)
```

### éªŒè¯æ£€æŸ¥æ¸…å•
æ¯æ¬¡é‡æ„åå¿…é¡»é€šè¿‡ï¼š

âœ… **å•å…ƒæµ‹è¯•**: æ‰€æœ‰æ ¸å¿ƒå‡½æ•°æµ‹è¯•é€šè¿‡
âœ… **é›†æˆæµ‹è¯•**: æ¨¡å—é—´åä½œæ­£å¸¸
âœ… **APIæµ‹è¯•**: æ‰€æœ‰å…¬å…±APIåŠŸèƒ½æ­£å¸¸
âœ… **æ€§èƒ½æµ‹è¯•**: æ€§èƒ½æŒ‡æ ‡ä¸é™çº§
âœ… **E2Eæµ‹è¯•**: å®Œæ•´ç”¨æˆ·æµç¨‹æ­£å¸¸
âœ… **æ‰‹åŠ¨æµ‹è¯•**: åœ¨çœŸå®æµè§ˆå™¨ä¸­éªŒè¯

### å›æ»šç­–ç•¥
å¦‚æœä»»ä½•æµ‹è¯•å¤±è´¥ï¼š
1. ç«‹å³åœæ­¢é‡æ„
2. åˆ†æå¤±è´¥åŸå› 
3. ä¿®å¤é—®é¢˜æˆ–å›æ»šæ›´æ”¹
4. é‡æ–°è¿è¡Œæµ‹è¯•å¥—ä»¶
5. ç¡®è®¤é€šè¿‡åç»§ç»­

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡
- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**: > 90%
- **é›†æˆæµ‹è¯•è¦†ç›–ç‡**: > 80%
- **E2Eæµ‹è¯•è¦†ç›–ç‡**: > 95%

### æ€§èƒ½ç›®æ ‡
- **æ‹–æ‹½å“åº”**: < 16ms (60fps)
- **å¸é™„è®¡ç®—**: < 50ms
- **å†…å­˜ä½¿ç”¨**: ä¸è¶…è¿‡åŸç‰ˆæœ¬çš„120%

### è´¨é‡ç›®æ ‡
- **é›¶å›å½’**: æ‰€æœ‰ç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜
- **ä»£ç è´¨é‡**: ESLint/Prettier é€šè¿‡
- **ç±»å‹å®‰å…¨**: TypeScript ä¸¥æ ¼æ¨¡å¼é€šè¿‡

## ğŸš€ å®æ–½å»ºè®®

### ç¬¬ä¸€æ­¥: ç«‹å³å¼€å§‹
1. å»ºç«‹Jest/Vitestæµ‹è¯•ç¯å¢ƒ
2. ä¸ºæœ€æ ¸å¿ƒçš„æ‹–æ‹½åŠŸèƒ½ç¼–å†™å•å…ƒæµ‹è¯•
3. è¿è¡Œç°æœ‰E2Eæµ‹è¯•ç¡®ä¿åŸºçº¿

### é£é™©æ§åˆ¶
1. **å°æ­¥å¿«è·‘**: æ¯æ¬¡åªé‡æ„ä¸€ä¸ªå°åŠŸèƒ½
2. **é¢‘ç¹æµ‹è¯•**: æ¯æ¬¡æ›´æ”¹åç«‹å³è¿è¡Œæµ‹è¯•
3. **ä¿ç•™å¤‡ä»½**: ä½¿ç”¨Gitåˆ†æ”¯ç®¡ç†æ¯ä¸ªé‡æ„æ­¥éª¤
4. **æ–‡æ¡£è®°å½•**: è®°å½•æ¯æ¬¡é‡æ„çš„å†³ç­–å’Œç»“æœ

è¿™ä¸ªç­–ç•¥ç¡®ä¿äº†é‡æ„çš„å®‰å…¨æ€§å’ŒæˆåŠŸç‡ï¼Œè®©æ‚¨å¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œç°ä»£åŒ–å‡çº§ï¼
