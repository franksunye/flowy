# 🎨 演示目录使用指南

## 🎯 重构阶段演示目录的重要性

在Flowy的模块化重构过程中，我们维护了三个关键的演示目录，每个都有特定的作用和价值。

## 📂 演示目录说明

### 1. `original-demo/` ⭐ **功能基准参考**

**作用**: 重构的功能基准和行为标准
**重要性**: 🔥 **极其重要** - 重构阶段的黄金标准

#### 技术特征
- **代码**: 使用 `flowy.min.js` (压缩版本)
- **状态**: 原始发布版本，功能完整稳定
- **用途**: 功能对比基准

#### 重构价值
- ✅ **功能基准**: 确保重构后功能与原版100%一致
- ✅ **行为参考**: 验证拖拽、吸附、重排等核心功能
- ✅ **用户体验标准**: 保持相同的交互体验
- ✅ **回归测试**: 发现重构中的功能退化

#### 使用场景
```bash
# 启动原始演示进行功能对比
open docs/original-demo/index.html

# 对比重构版本功能
# 1. 在original-demo中测试功能A
# 2. 在refactor-demo中测试相同功能A  
# 3. 确保行为完全一致
```

### 2. `src-demo/` ⭐ **代码结构参考**

**作用**: 重构的代码起点和架构分析对象
**重要性**: 🔥 **极其重要** - 重构阶段的源码基准

#### 技术特征
- **代码**: 使用原始 `src/flowy.js` (478行单体文件)
- **状态**: 未压缩源码，完整可读
- **用途**: 代码结构分析和模块提取

#### 重构价值
- ✅ **架构分析**: 理解原始单体架构的设计思路
- ✅ **模块提取**: 识别可以模块化的功能块
- ✅ **算法参考**: 保持核心算法的正确性
- ✅ **重构对比**: 验证重构前后代码逻辑一致性

#### 使用场景
```bash
# 分析原始代码结构
cat docs/src-demo/flowy.js | grep -n "function\|var\|if"

# 对比重构前后的代码
# 1. 查看src-demo/flowy.js中的原始实现
# 2. 查看src/flowy.js中的重构实现
# 3. 确保核心逻辑保持一致
```

### 3. `refactor-demo/` 🔄 **重构验证**

**作用**: 重构过程的实时功能验证
**重要性**: 🔥 **当前最重要** - 重构成果的直接体现

#### 技术特征
- **代码**: 使用重构中的模块化代码
- **状态**: 动态更新，反映重构进展
- **用途**: 实时功能验证和集成测试

#### 重构价值
- ✅ **实时验证**: 每次重构后立即验证功能
- ✅ **集成测试**: 验证模块间的协作
- ✅ **性能监控**: 确保重构不影响性能
- ✅ **用户体验**: 保持与原版一致的体验

## 🔄 重构工作流程

### 标准重构验证流程
```
1. 📖 分析 src-demo/flowy.js 中的原始实现
   ↓
2. 🔧 在 src/ 中进行模块化重构
   ↓  
3. 🧪 在 refactor-demo/ 中验证重构结果
   ↓
4. 📊 与 original-demo/ 对比确保功能一致
   ↓
5. ✅ 确认重构成功，继续下一步
```

### 问题排查流程
```
发现问题 → 在original-demo中确认预期行为
         ↓
         在src-demo中查找原始实现逻辑
         ↓
         在refactor-demo中重现和调试
         ↓
         修复后重新验证三个演示的一致性
```

## 🎯 重构阶段最佳实践

### 1. 三重验证原则
- **功能验证**: refactor-demo vs original-demo
- **代码验证**: 重构代码 vs src-demo代码
- **体验验证**: 用户交互的一致性

### 2. 渐进式重构
- 每次重构一个小模块
- 立即在三个演示中验证
- 确保每步都不破坏现有功能

### 3. 文档同步
- 重构进展及时更新到 35_REFACTOR_PLAN.md
- 架构变化及时更新到 10_ARCHITECTURE.md
- 测试状态及时更新到 60_TESTING_STATUS.md

## ⚠️ 重要提醒

### 🚫 绝对不要删除
- `original-demo/` 和 `src-demo/` 是重构阶段的**关键参考对象**
- 删除它们会失去重构的基准和参考
- 它们是确保重构质量的重要保障

### 📋 维护原则
- **只读参考**: 不修改original-demo和src-demo的内容
- **动态更新**: 只更新refactor-demo以反映重构进展
- **版本控制**: 确保三个演示都在版本控制中

---

**创建时间**: 2025-07-24  
**适用阶段**: 模块化重构阶段  
**维护责任**: 重构团队
