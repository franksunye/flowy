{"version":3,"file":"flowy.umd.js","sources":["../src/flowy.js"],"sourcesContent":["// 导入DOM工具模块\n// 在浏览器环境中，DomUtils会被自动加载到window.DomUtils\n// 在Node.js测试环境中，通过require加载\n\nvar flowy = function(canvas, grab, release, snapping, spacing_x, spacing_y) {\n    if (!grab) {\n        grab = function() {};\n    }\n    if (!release) {\n        release = function() {};\n    }\n    if (!snapping) {\n        snapping = function() {};\n    }\n    if (!spacing_x) {\n        spacing_x = 20;\n    }\n    if (!spacing_y) {\n        spacing_y = 80;\n    }\n    $(document).ready(function() {\n        var blocks = [];\n        var blockstemp = [];\n        var canvas_div = canvas;\n        var active = false;\n        var paddingx = spacing_x;\n        var paddingy = spacing_y;\n        var offsetleft = 0;\n        var offsetleftold = 0;\n        var rearrange = false;\n        var lastevent = false;\n        var drag, dragx, dragy, original;\n        // 添加条件检查，确保 canvas_div 存在且有 append 方法\n        if (canvas_div && typeof canvas_div.append === 'function') {\n            canvas_div.append(\"<div class='indicator invisible'></div>\");\n        }\n        flowy.output = function() {\n            var json_data = [];\n            if (blocks.length > 0) {\n                for (var i = 0; i < blocks.length; i++) {\n                    json_data.push({\n                        id: blocks[i].id,\n                        parent: blocks[i].parent,\n                        data: []\n                    });\n                    $(\".blockid[value=\" + blocks[i].id + \"]\").parent().children(\"input\").each(function() {\n                        var json_name = $(this).attr(\"name\");\n                        var json_value = $(this).val();\n                        json_data[i].data.push({\n                            name: json_name,\n                            value: json_value\n                        });\n                    })\n                }\n                return json_data;\n            }\n        }\n        flowy.deleteBlocks = function() {\n            blocks = [];\n            canvas_div.html(\"<div class='indicator invisible'></div>\");\n        }\n        $(document).on(\"mousedown\", \".create-flowy\", function(event) {\n            if (event.which === 1) {\n                original = $(this);\n                if (blocks.length == 0) {\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + blocks.length + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + blocks.length + \"]\").parent();\n                } else {\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + (Math.max.apply(Math, blocks.map(a => a.id)) + 1) + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + (parseInt(Math.max.apply(Math, blocks.map(a => a.id))) + 1) + \"]\").parent();\n                }\n                blockGrabbed($(this));\n                drag.addClass(\"dragging\");\n                active = true;\n                dragx = event.clientX - $(this).offset().left;\n                dragy = event.clientY - $(this).offset().top;\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            }\n        });\n        $(document).on(\"mouseup\", function(event) {\n            if (event.which === 1 && (active || rearrange)) {\n                blockReleased();\n                if (!$(\".indicator\").hasClass(\"invisible\")) {\n                    $(\".indicator\").addClass(\"invisible\");\n                }\n                if (active) {\n                    original.removeClass(\"dragnow\");\n                    drag.removeClass(\"dragging\");\n                }\n                if (parseInt(drag.children(\".blockid\").val()) == 0 && rearrange) {\n                    drag.removeClass(\"dragging\");\n                    rearrange = false;\n                    for (var w = 0; w < blockstemp.length; w++) {\n                        if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                            blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                            blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                        }\n                    }\n                    blockstemp.filter(a => a.id == 0)[0].x = drag.offset().left + (drag.innerWidth() / 2);\n                    blockstemp.filter(a => a.id == 0)[0].y = drag.offset().top + (drag.innerHeight() / 2);\n                    blocks = $.merge(blocks, blockstemp);\n                    blockstemp = [];\n                } else if (active && blocks.length == 0 && drag.offset().top > canvas_div.offset().top && drag.offset().left > canvas_div.offset().left) {\n                    blockSnap(drag);\n                    active = false;\n                    drag.css(\"top\", drag.offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                    drag.css(\"left\", drag.offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                    drag.appendTo(canvas_div);\n                    blocks.push({\n                        parent: -1,\n                        childwidth: 0,\n                        id: parseInt(drag.children(\".blockid\").val()),\n                        x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                        y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                        width: drag.innerWidth(),\n                        height: drag.innerHeight()\n                    });\n                } else if (active && blocks.length == 0) {\n                    drag.remove();\n                } else if (active || rearrange) {\n                    var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                    var ypos = drag.offset().top + canvas_div.scrollTop();\n                    var blocko = blocks.map(a => a.id);\n                    for (var i = 0; i < blocks.length; i++) {\n                        if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                            active = false;\n                            if (!rearrange) {\n                                blockSnap(drag);\n                                drag.appendTo(canvas_div);\n                            }\n                            var totalwidth = 0;\n                            var totalremove = 0;\n                            var maxheight = 0;\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    totalwidth += children.childwidth + paddingx;\n                                } else {\n                                    totalwidth += children.width + paddingx;\n                                }\n                            }\n                            totalwidth += drag.innerWidth();\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                                    totalremove += children.childwidth + paddingx;\n                                } else {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                                    totalremove += children.width + paddingx;\n                                }\n                            }\n                            drag.css(\"left\", blocks.filter(id => id.id == blocko[i])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            drag.css(\"top\", blocks.filter(id => id.id == blocko[i])[0].y + (blocks.filter(id => id.id == blocko[i])[0].height / 2) + paddingy - canvas_div.offset().top + \"px\");\n                            if (rearrange) {\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft() + canvas_div.scrollLeft();\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].y = drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n                                blockstemp.filter(a => a.id == drag.children(\".blockid\").val())[0].parent = blocko[i];\n                                for (var w = 0; w < blockstemp.length; w++) {\n                                    if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + 20);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                                        blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                                        blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                                    }\n                                }\n                                blocks = $.merge(blocks, blockstemp);\n                                blockstemp = [];\n                            } else {\n                                blocks.push({\n                                    childwidth: 0,\n                                    parent: blocko[i],\n                                    id: parseInt(drag.children(\".blockid\").val()),\n                                    x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                                    y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                                    width: drag.innerWidth(),\n                                    height: drag.innerHeight()\n                                });\n                            }\n                            var arrowhelp = blocks.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0];\n                            var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocko[i])[0].x + 20;\n                            var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(id => id.parent == blocko[i])[0].y + (blocks.filter(id => id.parent == blocko[i])[0].height / 2)) + canvas_div.scrollTop();\n                            if (arrowx < 0) {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + drag.children(\".blockid\").val() + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            } else {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - 20 - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            }\n                            $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"top\", blocks.filter(a => a.id == blocko[i])[0].y + (blocks.filter(a => a.id == blocko[i])[0].height / 2) + \"px\");\n                            if (blocks.filter(a => a.id == blocko[i])[0].parent != -1) {\n                                var flag = false;\n                                var idval = blocko[i];\n                                while (!flag) {\n                                    if (blocks.filter(a => a.id == idval)[0].parent == -1) {\n                                        flag = true;\n                                    } else {\n                                        var zwidth = 0;\n                                        for (var w = 0; w < blocks.filter(id => id.parent == idval).length; w++) {\n                                            var children = blocks.filter(id => id.parent == idval)[w];\n                                            if (children.childwidth > children.width) {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.childwidth;\n                                                } else {\n                                                    zwidth += children.childwidth + paddingx;\n                                                }\n                                            } else {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.width;\n                                                } else {\n                                                    zwidth += children.width + paddingx;\n                                                }\n                                            }\n                                        }\n                                        blocks.filter(a => a.id == idval)[0].childwidth = zwidth;\n                                        idval = blocks.filter(a => a.id == idval)[0].parent;\n                                    }\n                                }\n                                blocks.filter(id => id.id == idval)[0].childwidth = totalwidth;\n                            }\n                            if (rearrange) {\n                                rearrange = false;\n                                drag.removeClass(\"dragging\");\n                            }\n                            rearrangeMe();\n                            checkOffset();\n                            break;\n                        } else if (i == blocks.length - 1) {\n                            if (rearrange) {\n                                rearrange = false;\n                                blockstemp = [];\n                            }\n                            active = false;\n                            drag.remove();\n                        }\n                    }\n                }\n            }\n        });\n        $(document).on(\"mousedown\", \".block\", function(event) {\n            $(document).on(\"mouseup mousemove\", \".block\", function handler(event) {\n                if (event.type !== \"mouseup\") {\n                    if (event.which === 1) {\n                        if (!active && !rearrange) {\n                            rearrange = true;\n                            drag = $(this);\n                            drag.addClass(\"dragging\");\n                            dragx = event.clientX - $(this).offset().left;\n                            dragy = event.clientY - $(this).offset().top;\n                            var blockid = parseInt($(this).children(\".blockid\").val());\n                            drag = $(this);\n                            blockstemp.push(blocks.filter(a => a.id == blockid)[0]);\n                            blocks = $.grep(blocks, function(e) {\n                                return e.id != blockid\n                            });\n                            $(\".arrowid[value=\" + blockid + \"]\").parent().remove();\n                            var layer = blocks.filter(a => a.parent == blockid);\n                            var flag = false;\n                            var foundids = [];\n                            var allids = [];\n                            while (!flag) {\n                                for (var i = 0; i < layer.length; i++) {\n                                    blockstemp.push(blocks.filter(a => a.id == layer[i].id)[0]);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    foundids.push(layer[i].id);\n                                    allids.push(layer[i].id);\n                                }\n                                if (foundids.length == 0) {\n                                    flag = true;\n                                } else {\n                                    layer = blocks.filter(a => foundids.includes(a.parent));\n                                    foundids = [];\n                                }\n                            }\n                            for (var i = 0; i < blocks.filter(a => a.parent == blockid).length; i++) {\n                                var blocknumber = blocks.filter(a => a.parent == blockid)[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            for (var i = 0; i < allids.length; i++) {\n                                var blocknumber = allids[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            if (blocks.length > 1) {\n                                rearrangeMe();\n                            }\n                            if (lastevent) {\n                                fixOffset();\n                            }\n                        }\n                    }\n                }\n                $(document).off(\"mouseup mousemove\", handler);\n            });\n        });\n        $(document).on(\"mousemove\", function(event) {\n            if (active) {\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            } else if (rearrange) {\n                drag.css(\"left\", event.clientX - dragx - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                drag.css(\"top\", event.clientY - dragy - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).y = drag.offset().left + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n            }\n            if (active || rearrange) {\n                var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                var ypos = drag.offset().top + canvas_div.scrollTop();\n                var blocko = blocks.map(a => a.id);\n                for (var i = 0; i < blocks.length; i++) {\n                    if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                        $(\".indicator\").appendTo($(\".blockid[value=\" + blocko[i] + \"]\").parent());\n                        $(\".indicator\").css(\"left\", ($(\".blockid[value=\" + blocko[i] + \"]\").parent().innerWidth() / 2) - 5 + \"px\");\n                        $(\".indicator\").css(\"top\", $(\".blockid[value=\" + blocko[i] + \"]\").parent().innerHeight() + \"px\");\n                        $(\".indicator\").removeClass(\"invisible\");\n                        break;\n                    } else if (i == blocks.length - 1) {\n                        if (!$(\".indicator\").hasClass(\"invisible\")) {\n                            $(\".indicator\").addClass(\"invisible\");\n                        }\n                    }\n                }\n            }\n        })\n\n        function checkOffset() {\n            offsetleft = blocks.map(a => a.x);\n            var widths = blocks.map(a => a.width);\n            var mathmin = offsetleft.map(function(item, index) {\n                return item - (widths[index] / 2);\n            })\n            offsetleft = Math.min.apply(Math, mathmin);\n            if (offsetleft < canvas_div.offset().left) {\n                lastevent = true;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleft + 20);\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - offsetleft + 20 - 5) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - offsetleft + 20 + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    blocks[w].x = $(\".blockid[value=\" + blocks[w].id + \"]\").parent().offset().left + canvas_div.offset().left - ($(\".blockid[value=\" + blocks[w].id + \"]\").parent().innerWidth() / 2) - 40;\n                }\n                offsetleftold = offsetleft;\n            }\n        }\n\n        function fixOffset() {\n            if (offsetleftold < canvas_div.offset().left) {\n                lastevent = false;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleftold - 20);\n                    blocks.filter(a => a.id == blocko[w])[0].x = $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().offset().left + (blocks.filter(a => a.id == blocko[w])[0].width / 2);\n\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - 5 - canvas_div.offset().left) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    //blocks[w].x = blocks[w].x+offsetleftold-20;\n                }\n                offsetleftold = 0;\n            }\n        }\n\n        function rearrangeMe() {\n            var result = blocks.map(a => a.parent);\n            for (var z = 0; z < result.length; z++) {\n                if (result[z] == -1) {\n                    z++;\n                }\n                var totalwidth = 0;\n                var totalremove = 0;\n                var maxheight = 0;\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    if (blocks.filter(id => id.parent == children.id).length == 0) {\n                        children.childwidth = 0;\n                    }\n                    if (children.childwidth > children.width) {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.childwidth;\n                        } else {\n                            totalwidth += children.childwidth + paddingx;\n                        }\n                    } else {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.width;\n                        } else {\n                            totalwidth += children.width + paddingx;\n                        }\n                    }\n                }\n                if (result[z] != -1) {\n                    blocks.filter(a => a.id == result[z])[0].childwidth = totalwidth;\n                }\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"top\", blocks.filter(id => id.id == result[z]).y + paddingy + \"px\");\n                    blocks.filter(id => id.id == result[z]).y = blocks.filter(id => id.id == result[z]).y + paddingy;\n                    if (children.childwidth > children.width) {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                        totalremove += children.childwidth + paddingx;\n                    } else {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                        totalremove += children.width + paddingx;\n                    }\n                    var arrowhelp = blocks.filter(a => a.id == children.id)[0];\n                    var arrowx = arrowhelp.x - blocks.filter(a => a.id == children.parent)[0].x + 20;\n                    var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(a => a.id == children.parent)[0].y + (blocks.filter(a => a.id == children.parent)[0].height / 2));\n                    $('.arrowid[value=' + children.id + ']').parent().css(\"top\", blocks.filter(id => id.id == children.parent)[0].y + (blocks.filter(id => id.id == children.parent)[0].height / 2) - canvas_div.offset().top + \"px\");\n                    if (arrowx < 0) {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    } else {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", blocks.filter(id => id.id == children.parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    }\n                }\n            }\n        }\n    });\n\n    function blockGrabbed(block) {\n        grab(block);\n    }\n\n    function blockReleased() {\n        release();\n    }\n\n    function blockSnap(drag) {\n        snapping(drag);\n    }\n}\n\n// 模块导出支持（用于测试覆盖率追踪）\n// 这不会影响浏览器中的使用，因为 module 在浏览器中未定义\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = flowy;\n}\n"],"names":["flowy","canvas","grab","release","snapping","spacing_x","spacing_y","blockSnap","drag","$","document","ready","dragx","dragy","original","blocks","blockstemp","canvas_div","active","paddingx","paddingy","offsetleft","offsetleftold","rearrange","lastevent","checkOffset","map","a","x","widths","width","mathmin","item","index","Math","min","apply","offset","left","blocko","id","w","length","filter","parent","css","arrowhelp","innerWidth","rearrangeMe","result","z","totalwidth","totalremove","children","childwidth","y","arrowx","arrowy","height","top","html","append","output","json_data","i","push","data","each","json_name","this","attr","json_value","val","name","value","deleteBlocks","on","event","block","which","clone","addClass","removeClass","appendTo","max","parseInt","clientX","clientY","hasClass","scrollLeft","scrollTop","innerHeight","merge","remove","xpos","ypos","after","flag","idval","zwidth","handler","type","blockid","grep","e","layer","foundids","allids","includes","blocknumber","fixOffset","off","module","exports"],"mappings":"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"}