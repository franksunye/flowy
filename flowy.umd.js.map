{"version":3,"file":"flowy.umd.js","sources":["../src/flowy.js"],"sourcesContent":["// 导入模块\n// 在浏览器环境中，模块会被自动加载到window对象\n// 在Node.js测试环境中，通过require加载\n// - DomUtils: DOM操作工具\n// - BlockManager: 块管理模块\n\nvar flowy = function(canvas, grab, release, snapping, spacing_x, spacing_y) {\n    if (!grab) {\n        grab = function() {};\n    }\n    if (!release) {\n        release = function() {};\n    }\n    if (!snapping) {\n        snapping = function() {};\n    }\n    if (!spacing_x) {\n        spacing_x = 20;\n    }\n    if (!spacing_y) {\n        spacing_y = 80;\n    }\n    $(document).ready(function() {\n        // 创建块管理器实例\n        var blockManager = (typeof BlockManager !== 'undefined') ? new BlockManager() : null;\n\n        // 保持原有变量作为引用，确保向后兼容\n        var blocks = blockManager ? blockManager.getAllBlocks() : [];\n        var blockstemp = blockManager ? blockManager.getTempBlocks() : [];\n        var canvas_div = canvas;\n\n        // 辅助函数：获取块数量（兼容原有代码）\n        function getBlockCount() {\n            return blockManager ? blockManager.getBlockCount() : blocks.length;\n        }\n\n        // 辅助函数：获取下一个块ID\n        function getNextBlockId() {\n            if (blockManager) {\n                return blockManager.getNextBlockId();\n            } else {\n                return blocks.length === 0 ? 0 : Math.max.apply(Math, blocks.map(a => a.id)) + 1;\n            }\n        }\n\n        // 辅助函数：清空所有块\n        function clearAllBlocks() {\n            if (blockManager) {\n                blockManager.clearBlocks();\n                // 同时清空引用数组以保持同步\n                blocks.length = 0;\n            } else {\n                blocks = [];\n            }\n        }\n\n        // 辅助函数：添加块\n        function addBlock(blockData) {\n            if (blockManager) {\n                blockManager.addBlock(blockData);\n                // 同时添加到引用数组以保持同步\n                blocks.push(blockData);\n            } else {\n                blocks.push(blockData);\n            }\n        }\n        var active = false;\n        var paddingx = spacing_x;\n        var paddingy = spacing_y;\n        var offsetleft = 0;\n        var offsetleftold = 0;\n        var rearrange = false;\n        var lastevent = false;\n        var drag, dragx, dragy, original;\n        // 添加条件检查，确保 canvas_div 存在且有 append 方法\n        if (canvas_div && typeof canvas_div.append === 'function') {\n            canvas_div.append(\"<div class='indicator invisible'></div>\");\n        }\n        flowy.output = function() {\n            var json_data = [];\n            if (blocks.length > 0) {\n                for (var i = 0; i < blocks.length; i++) {\n                    json_data.push({\n                        id: blocks[i].id,\n                        parent: blocks[i].parent,\n                        data: []\n                    });\n                    $(\".blockid[value=\" + blocks[i].id + \"]\").parent().children(\"input\").each(function() {\n                        var json_name = $(this).attr(\"name\");\n                        var json_value = $(this).val();\n                        json_data[i].data.push({\n                            name: json_name,\n                            value: json_value\n                        });\n                    })\n                }\n                return json_data;\n            }\n        }\n        flowy.deleteBlocks = function() {\n            clearAllBlocks();\n            canvas_div.html(\"<div class='indicator invisible'></div>\");\n        }\n        $(document).on(\"mousedown\", \".create-flowy\", function(event) {\n            if (event.which === 1) {\n                original = $(this);\n                if (getBlockCount() == 0) {\n                    var newBlockId = getBlockCount(); // 当blocks为空时，使用0作为第一个ID\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + newBlockId + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + newBlockId + \"]\").parent();\n                } else {\n                    var newBlockId = getNextBlockId();\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + newBlockId + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + newBlockId + \"]\").parent();\n                }\n                blockGrabbed($(this));\n                drag.addClass(\"dragging\");\n                active = true;\n                dragx = event.clientX - $(this).offset().left;\n                dragy = event.clientY - $(this).offset().top;\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            }\n        });\n        $(document).on(\"mouseup\", function(event) {\n            if (event.which === 1 && (active || rearrange)) {\n                blockReleased();\n                if (!$(\".indicator\").hasClass(\"invisible\")) {\n                    $(\".indicator\").addClass(\"invisible\");\n                }\n                if (active) {\n                    original.removeClass(\"dragnow\");\n                    drag.removeClass(\"dragging\");\n                }\n                if (parseInt(drag.children(\".blockid\").val()) == 0 && rearrange) {\n                    drag.removeClass(\"dragging\");\n                    rearrange = false;\n                    for (var w = 0; w < blockstemp.length; w++) {\n                        if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                            blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                            blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                        }\n                    }\n                    blockstemp.filter(a => a.id == 0)[0].x = drag.offset().left + (drag.innerWidth() / 2);\n                    blockstemp.filter(a => a.id == 0)[0].y = drag.offset().top + (drag.innerHeight() / 2);\n                    blocks = $.merge(blocks, blockstemp);\n                    blockstemp = [];\n                } else if (active && blocks.length == 0 && drag.offset().top > canvas_div.offset().top && drag.offset().left > canvas_div.offset().left) {\n                    blockSnap(drag);\n                    active = false;\n                    drag.css(\"top\", drag.offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                    drag.css(\"left\", drag.offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                    drag.appendTo(canvas_div);\n                    addBlock({\n                        parent: -1,\n                        childwidth: 0,\n                        id: parseInt(drag.children(\".blockid\").val()),\n                        x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                        y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                        width: drag.innerWidth(),\n                        height: drag.innerHeight()\n                    });\n                } else if (active && blocks.length == 0) {\n                    drag.remove();\n                } else if (active || rearrange) {\n                    var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                    var ypos = drag.offset().top + canvas_div.scrollTop();\n                    var blocko = blocks.map(a => a.id);\n                    for (var i = 0; i < blocks.length; i++) {\n                        if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                            active = false;\n                            if (!rearrange) {\n                                blockSnap(drag);\n                                drag.appendTo(canvas_div);\n                            }\n                            var totalwidth = 0;\n                            var totalremove = 0;\n                            var maxheight = 0;\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    totalwidth += children.childwidth + paddingx;\n                                } else {\n                                    totalwidth += children.width + paddingx;\n                                }\n                            }\n                            totalwidth += drag.innerWidth();\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                                    totalremove += children.childwidth + paddingx;\n                                } else {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                                    totalremove += children.width + paddingx;\n                                }\n                            }\n                            drag.css(\"left\", blocks.filter(id => id.id == blocko[i])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            drag.css(\"top\", blocks.filter(id => id.id == blocko[i])[0].y + (blocks.filter(id => id.id == blocko[i])[0].height / 2) + paddingy - canvas_div.offset().top + \"px\");\n                            if (rearrange) {\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft() + canvas_div.scrollLeft();\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].y = drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n                                blockstemp.filter(a => a.id == drag.children(\".blockid\").val())[0].parent = blocko[i];\n                                for (var w = 0; w < blockstemp.length; w++) {\n                                    if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + 20);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                                        blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                                        blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                                    }\n                                }\n                                blocks = $.merge(blocks, blockstemp);\n                                blockstemp = [];\n                            } else {\n                                addBlock({\n                                    childwidth: 0,\n                                    parent: blocko[i],\n                                    id: parseInt(drag.children(\".blockid\").val()),\n                                    x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                                    y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                                    width: drag.innerWidth(),\n                                    height: drag.innerHeight()\n                                });\n                            }\n                            var arrowhelp = blocks.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0];\n                            var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocko[i])[0].x + 20;\n                            var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(id => id.parent == blocko[i])[0].y + (blocks.filter(id => id.parent == blocko[i])[0].height / 2)) + canvas_div.scrollTop();\n                            if (arrowx < 0) {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + drag.children(\".blockid\").val() + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            } else {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - 20 - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            }\n                            $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"top\", blocks.filter(a => a.id == blocko[i])[0].y + (blocks.filter(a => a.id == blocko[i])[0].height / 2) + \"px\");\n                            if (blocks.filter(a => a.id == blocko[i])[0].parent != -1) {\n                                var flag = false;\n                                var idval = blocko[i];\n                                while (!flag) {\n                                    if (blocks.filter(a => a.id == idval)[0].parent == -1) {\n                                        flag = true;\n                                    } else {\n                                        var zwidth = 0;\n                                        for (var w = 0; w < blocks.filter(id => id.parent == idval).length; w++) {\n                                            var children = blocks.filter(id => id.parent == idval)[w];\n                                            if (children.childwidth > children.width) {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.childwidth;\n                                                } else {\n                                                    zwidth += children.childwidth + paddingx;\n                                                }\n                                            } else {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.width;\n                                                } else {\n                                                    zwidth += children.width + paddingx;\n                                                }\n                                            }\n                                        }\n                                        blocks.filter(a => a.id == idval)[0].childwidth = zwidth;\n                                        idval = blocks.filter(a => a.id == idval)[0].parent;\n                                    }\n                                }\n                                blocks.filter(id => id.id == idval)[0].childwidth = totalwidth;\n                            }\n                            if (rearrange) {\n                                rearrange = false;\n                                drag.removeClass(\"dragging\");\n                            }\n                            rearrangeMe();\n                            checkOffset();\n                            break;\n                        } else if (i == blocks.length - 1) {\n                            if (rearrange) {\n                                rearrange = false;\n                                blockstemp = [];\n                            }\n                            active = false;\n                            drag.remove();\n                        }\n                    }\n                }\n            }\n        });\n        $(document).on(\"mousedown\", \".block\", function(event) {\n            $(document).on(\"mouseup mousemove\", \".block\", function handler(event) {\n                if (event.type !== \"mouseup\") {\n                    if (event.which === 1) {\n                        if (!active && !rearrange) {\n                            rearrange = true;\n                            drag = $(this);\n                            drag.addClass(\"dragging\");\n                            dragx = event.clientX - $(this).offset().left;\n                            dragy = event.clientY - $(this).offset().top;\n                            var blockid = parseInt($(this).children(\".blockid\").val());\n                            drag = $(this);\n                            blockstemp.push(blocks.filter(a => a.id == blockid)[0]);\n                            blocks = $.grep(blocks, function(e) {\n                                return e.id != blockid\n                            });\n                            $(\".arrowid[value=\" + blockid + \"]\").parent().remove();\n                            var layer = blocks.filter(a => a.parent == blockid);\n                            var flag = false;\n                            var foundids = [];\n                            var allids = [];\n                            while (!flag) {\n                                for (var i = 0; i < layer.length; i++) {\n                                    blockstemp.push(blocks.filter(a => a.id == layer[i].id)[0]);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    foundids.push(layer[i].id);\n                                    allids.push(layer[i].id);\n                                }\n                                if (foundids.length == 0) {\n                                    flag = true;\n                                } else {\n                                    layer = blocks.filter(a => foundids.includes(a.parent));\n                                    foundids = [];\n                                }\n                            }\n                            for (var i = 0; i < blocks.filter(a => a.parent == blockid).length; i++) {\n                                var blocknumber = blocks.filter(a => a.parent == blockid)[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            for (var i = 0; i < allids.length; i++) {\n                                var blocknumber = allids[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            if (blocks.length > 1) {\n                                rearrangeMe();\n                            }\n                            if (lastevent) {\n                                fixOffset();\n                            }\n                        }\n                    }\n                }\n                $(document).off(\"mouseup mousemove\", handler);\n            });\n        });\n        $(document).on(\"mousemove\", function(event) {\n            if (active) {\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            } else if (rearrange) {\n                drag.css(\"left\", event.clientX - dragx - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                drag.css(\"top\", event.clientY - dragy - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).y = drag.offset().left + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n            }\n            if (active || rearrange) {\n                var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                var ypos = drag.offset().top + canvas_div.scrollTop();\n                var blocko = blocks.map(a => a.id);\n                for (var i = 0; i < blocks.length; i++) {\n                    if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                        $(\".indicator\").appendTo($(\".blockid[value=\" + blocko[i] + \"]\").parent());\n                        $(\".indicator\").css(\"left\", ($(\".blockid[value=\" + blocko[i] + \"]\").parent().innerWidth() / 2) - 5 + \"px\");\n                        $(\".indicator\").css(\"top\", $(\".blockid[value=\" + blocko[i] + \"]\").parent().innerHeight() + \"px\");\n                        $(\".indicator\").removeClass(\"invisible\");\n                        break;\n                    } else if (i == blocks.length - 1) {\n                        if (!$(\".indicator\").hasClass(\"invisible\")) {\n                            $(\".indicator\").addClass(\"invisible\");\n                        }\n                    }\n                }\n            }\n        })\n\n        function checkOffset() {\n            offsetleft = blocks.map(a => a.x);\n            var widths = blocks.map(a => a.width);\n            var mathmin = offsetleft.map(function(item, index) {\n                return item - (widths[index] / 2);\n            })\n            offsetleft = Math.min.apply(Math, mathmin);\n            if (offsetleft < canvas_div.offset().left) {\n                lastevent = true;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleft + 20);\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - offsetleft + 20 - 5) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - offsetleft + 20 + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    blocks[w].x = $(\".blockid[value=\" + blocks[w].id + \"]\").parent().offset().left + canvas_div.offset().left - ($(\".blockid[value=\" + blocks[w].id + \"]\").parent().innerWidth() / 2) - 40;\n                }\n                offsetleftold = offsetleft;\n            }\n        }\n\n        function fixOffset() {\n            if (offsetleftold < canvas_div.offset().left) {\n                lastevent = false;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleftold - 20);\n                    blocks.filter(a => a.id == blocko[w])[0].x = $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().offset().left + (blocks.filter(a => a.id == blocko[w])[0].width / 2);\n\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - 5 - canvas_div.offset().left) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    //blocks[w].x = blocks[w].x+offsetleftold-20;\n                }\n                offsetleftold = 0;\n            }\n        }\n\n        function rearrangeMe() {\n            var result = blocks.map(a => a.parent);\n            for (var z = 0; z < result.length; z++) {\n                if (result[z] == -1) {\n                    z++;\n                }\n                var totalwidth = 0;\n                var totalremove = 0;\n                var maxheight = 0;\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    if (blocks.filter(id => id.parent == children.id).length == 0) {\n                        children.childwidth = 0;\n                    }\n                    if (children.childwidth > children.width) {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.childwidth;\n                        } else {\n                            totalwidth += children.childwidth + paddingx;\n                        }\n                    } else {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.width;\n                        } else {\n                            totalwidth += children.width + paddingx;\n                        }\n                    }\n                }\n                if (result[z] != -1) {\n                    blocks.filter(a => a.id == result[z])[0].childwidth = totalwidth;\n                }\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"top\", blocks.filter(id => id.id == result[z]).y + paddingy + \"px\");\n                    blocks.filter(id => id.id == result[z]).y = blocks.filter(id => id.id == result[z]).y + paddingy;\n                    if (children.childwidth > children.width) {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                        totalremove += children.childwidth + paddingx;\n                    } else {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                        totalremove += children.width + paddingx;\n                    }\n                    var arrowhelp = blocks.filter(a => a.id == children.id)[0];\n                    var arrowx = arrowhelp.x - blocks.filter(a => a.id == children.parent)[0].x + 20;\n                    var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(a => a.id == children.parent)[0].y + (blocks.filter(a => a.id == children.parent)[0].height / 2));\n                    $('.arrowid[value=' + children.id + ']').parent().css(\"top\", blocks.filter(id => id.id == children.parent)[0].y + (blocks.filter(id => id.id == children.parent)[0].height / 2) - canvas_div.offset().top + \"px\");\n                    if (arrowx < 0) {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    } else {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", blocks.filter(id => id.id == children.parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    }\n                }\n            }\n        }\n    });\n\n    function blockGrabbed(block) {\n        grab(block);\n    }\n\n    function blockReleased() {\n        release();\n    }\n\n    function blockSnap(drag) {\n        snapping(drag);\n    }\n}\n\n// 模块导出支持（用于测试覆盖率追踪）\n// 这不会影响浏览器中的使用，因为 module 在浏览器中未定义\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = flowy;\n}\n"],"names":["flowy","canvas","grab","release","snapping","spacing_x","spacing_y","blockSnap","drag","$","document","ready","blockManager","BlockManager","blocks","getAllBlocks","blockstemp","getTempBlocks","canvas_div","getBlockCount","length","addBlock","blockData","push","dragx","dragy","original","active","paddingx","paddingy","offsetleft","offsetleftold","rearrange","lastevent","checkOffset","map","a","x","widths","width","mathmin","item","index","Math","min","apply","offset","left","blocko","id","w","filter","parent","css","arrowhelp","innerWidth","rearrangeMe","result","z","totalwidth","totalremove","children","childwidth","y","arrowx","arrowy","height","top","html","append","output","json_data","i","data","each","json_name","this","attr","json_value","val","name","value","deleteBlocks","clearBlocks","on","event","which","newBlockId","clone","addClass","removeClass","appendTo","getNextBlockId","max","block","clientX","clientY","hasClass","parseInt","scrollLeft","scrollTop","innerHeight","merge","remove","xpos","ypos","after","flag","idval","zwidth","handler","type","blockid","grep","e","layer","foundids","allids","includes","blocknumber","fixOffset","off","module","exports"],"mappings":"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"}