{"version":3,"file":"flowy.iife.js","sources":["../src/flowy.js"],"sourcesContent":["// 导入模块\n// 在浏览器环境中，模块会被自动加载到window对象\n// 在Node.js测试环境中，通过require加载\n// - DomUtils: DOM操作工具\n// - BlockManager: 块管理模块\n\nvar flowy = function(canvas, grab, release, snapping, spacing_x, spacing_y) {\n    if (!grab) {\n        grab = function() {};\n    }\n    if (!release) {\n        release = function() {};\n    }\n    if (!snapping) {\n        snapping = function() {};\n    }\n    if (!spacing_x) {\n        spacing_x = 20;\n    }\n    if (!spacing_y) {\n        spacing_y = 80;\n    }\n    $(document).ready(function() {\n        // 创建块管理器实例\n        var blockManager = (typeof BlockManager !== 'undefined') ? new BlockManager() : null;\n\n        // 保持原有变量作为引用，确保向后兼容\n        var blocks = blockManager ? blockManager.getAllBlocks() : [];\n        var blockstemp = blockManager ? blockManager.getTempBlocks() : [];\n        var canvas_div = canvas;\n\n        // 辅助函数：获取块数量（兼容原有代码）\n        function getBlockCount() {\n            return blockManager ? blockManager.getBlockCount() : blocks.length;\n        }\n\n        // 辅助函数：获取下一个块ID\n        function getNextBlockId() {\n            if (blockManager) {\n                return blockManager.getNextBlockId();\n            } else {\n                return blocks.length === 0 ? 0 : Math.max.apply(Math, blocks.map(a => a.id)) + 1;\n            }\n        }\n        var active = false;\n        var paddingx = spacing_x;\n        var paddingy = spacing_y;\n        var offsetleft = 0;\n        var offsetleftold = 0;\n        var rearrange = false;\n        var lastevent = false;\n        var drag, dragx, dragy, original;\n        // 添加条件检查，确保 canvas_div 存在且有 append 方法\n        if (canvas_div && typeof canvas_div.append === 'function') {\n            canvas_div.append(\"<div class='indicator invisible'></div>\");\n        }\n        flowy.output = function() {\n            var json_data = [];\n            if (blocks.length > 0) {\n                for (var i = 0; i < blocks.length; i++) {\n                    json_data.push({\n                        id: blocks[i].id,\n                        parent: blocks[i].parent,\n                        data: []\n                    });\n                    $(\".blockid[value=\" + blocks[i].id + \"]\").parent().children(\"input\").each(function() {\n                        var json_name = $(this).attr(\"name\");\n                        var json_value = $(this).val();\n                        json_data[i].data.push({\n                            name: json_name,\n                            value: json_value\n                        });\n                    })\n                }\n                return json_data;\n            }\n        }\n        flowy.deleteBlocks = function() {\n            blocks = [];\n            canvas_div.html(\"<div class='indicator invisible'></div>\");\n        }\n        $(document).on(\"mousedown\", \".create-flowy\", function(event) {\n            if (event.which === 1) {\n                original = $(this);\n                if (getBlockCount() == 0) {\n                    var newBlockId = getBlockCount(); // 当blocks为空时，使用0作为第一个ID\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + newBlockId + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + newBlockId + \"]\").parent();\n                } else {\n                    var newBlockId = getNextBlockId();\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + newBlockId + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + newBlockId + \"]\").parent();\n                }\n                blockGrabbed($(this));\n                drag.addClass(\"dragging\");\n                active = true;\n                dragx = event.clientX - $(this).offset().left;\n                dragy = event.clientY - $(this).offset().top;\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            }\n        });\n        $(document).on(\"mouseup\", function(event) {\n            if (event.which === 1 && (active || rearrange)) {\n                blockReleased();\n                if (!$(\".indicator\").hasClass(\"invisible\")) {\n                    $(\".indicator\").addClass(\"invisible\");\n                }\n                if (active) {\n                    original.removeClass(\"dragnow\");\n                    drag.removeClass(\"dragging\");\n                }\n                if (parseInt(drag.children(\".blockid\").val()) == 0 && rearrange) {\n                    drag.removeClass(\"dragging\");\n                    rearrange = false;\n                    for (var w = 0; w < blockstemp.length; w++) {\n                        if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                            blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                            blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                        }\n                    }\n                    blockstemp.filter(a => a.id == 0)[0].x = drag.offset().left + (drag.innerWidth() / 2);\n                    blockstemp.filter(a => a.id == 0)[0].y = drag.offset().top + (drag.innerHeight() / 2);\n                    blocks = $.merge(blocks, blockstemp);\n                    blockstemp = [];\n                } else if (active && blocks.length == 0 && drag.offset().top > canvas_div.offset().top && drag.offset().left > canvas_div.offset().left) {\n                    blockSnap(drag);\n                    active = false;\n                    drag.css(\"top\", drag.offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                    drag.css(\"left\", drag.offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                    drag.appendTo(canvas_div);\n                    blocks.push({\n                        parent: -1,\n                        childwidth: 0,\n                        id: parseInt(drag.children(\".blockid\").val()),\n                        x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                        y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                        width: drag.innerWidth(),\n                        height: drag.innerHeight()\n                    });\n                } else if (active && blocks.length == 0) {\n                    drag.remove();\n                } else if (active || rearrange) {\n                    var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                    var ypos = drag.offset().top + canvas_div.scrollTop();\n                    var blocko = blocks.map(a => a.id);\n                    for (var i = 0; i < blocks.length; i++) {\n                        if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                            active = false;\n                            if (!rearrange) {\n                                blockSnap(drag);\n                                drag.appendTo(canvas_div);\n                            }\n                            var totalwidth = 0;\n                            var totalremove = 0;\n                            var maxheight = 0;\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    totalwidth += children.childwidth + paddingx;\n                                } else {\n                                    totalwidth += children.width + paddingx;\n                                }\n                            }\n                            totalwidth += drag.innerWidth();\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                                    totalremove += children.childwidth + paddingx;\n                                } else {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                                    totalremove += children.width + paddingx;\n                                }\n                            }\n                            drag.css(\"left\", blocks.filter(id => id.id == blocko[i])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            drag.css(\"top\", blocks.filter(id => id.id == blocko[i])[0].y + (blocks.filter(id => id.id == blocko[i])[0].height / 2) + paddingy - canvas_div.offset().top + \"px\");\n                            if (rearrange) {\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft() + canvas_div.scrollLeft();\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].y = drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n                                blockstemp.filter(a => a.id == drag.children(\".blockid\").val())[0].parent = blocko[i];\n                                for (var w = 0; w < blockstemp.length; w++) {\n                                    if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + 20);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                                        blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                                        blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                                    }\n                                }\n                                blocks = $.merge(blocks, blockstemp);\n                                blockstemp = [];\n                            } else {\n                                blocks.push({\n                                    childwidth: 0,\n                                    parent: blocko[i],\n                                    id: parseInt(drag.children(\".blockid\").val()),\n                                    x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                                    y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                                    width: drag.innerWidth(),\n                                    height: drag.innerHeight()\n                                });\n                            }\n                            var arrowhelp = blocks.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0];\n                            var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocko[i])[0].x + 20;\n                            var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(id => id.parent == blocko[i])[0].y + (blocks.filter(id => id.parent == blocko[i])[0].height / 2)) + canvas_div.scrollTop();\n                            if (arrowx < 0) {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + drag.children(\".blockid\").val() + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            } else {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - 20 - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            }\n                            $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"top\", blocks.filter(a => a.id == blocko[i])[0].y + (blocks.filter(a => a.id == blocko[i])[0].height / 2) + \"px\");\n                            if (blocks.filter(a => a.id == blocko[i])[0].parent != -1) {\n                                var flag = false;\n                                var idval = blocko[i];\n                                while (!flag) {\n                                    if (blocks.filter(a => a.id == idval)[0].parent == -1) {\n                                        flag = true;\n                                    } else {\n                                        var zwidth = 0;\n                                        for (var w = 0; w < blocks.filter(id => id.parent == idval).length; w++) {\n                                            var children = blocks.filter(id => id.parent == idval)[w];\n                                            if (children.childwidth > children.width) {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.childwidth;\n                                                } else {\n                                                    zwidth += children.childwidth + paddingx;\n                                                }\n                                            } else {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.width;\n                                                } else {\n                                                    zwidth += children.width + paddingx;\n                                                }\n                                            }\n                                        }\n                                        blocks.filter(a => a.id == idval)[0].childwidth = zwidth;\n                                        idval = blocks.filter(a => a.id == idval)[0].parent;\n                                    }\n                                }\n                                blocks.filter(id => id.id == idval)[0].childwidth = totalwidth;\n                            }\n                            if (rearrange) {\n                                rearrange = false;\n                                drag.removeClass(\"dragging\");\n                            }\n                            rearrangeMe();\n                            checkOffset();\n                            break;\n                        } else if (i == blocks.length - 1) {\n                            if (rearrange) {\n                                rearrange = false;\n                                blockstemp = [];\n                            }\n                            active = false;\n                            drag.remove();\n                        }\n                    }\n                }\n            }\n        });\n        $(document).on(\"mousedown\", \".block\", function(event) {\n            $(document).on(\"mouseup mousemove\", \".block\", function handler(event) {\n                if (event.type !== \"mouseup\") {\n                    if (event.which === 1) {\n                        if (!active && !rearrange) {\n                            rearrange = true;\n                            drag = $(this);\n                            drag.addClass(\"dragging\");\n                            dragx = event.clientX - $(this).offset().left;\n                            dragy = event.clientY - $(this).offset().top;\n                            var blockid = parseInt($(this).children(\".blockid\").val());\n                            drag = $(this);\n                            blockstemp.push(blocks.filter(a => a.id == blockid)[0]);\n                            blocks = $.grep(blocks, function(e) {\n                                return e.id != blockid\n                            });\n                            $(\".arrowid[value=\" + blockid + \"]\").parent().remove();\n                            var layer = blocks.filter(a => a.parent == blockid);\n                            var flag = false;\n                            var foundids = [];\n                            var allids = [];\n                            while (!flag) {\n                                for (var i = 0; i < layer.length; i++) {\n                                    blockstemp.push(blocks.filter(a => a.id == layer[i].id)[0]);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    foundids.push(layer[i].id);\n                                    allids.push(layer[i].id);\n                                }\n                                if (foundids.length == 0) {\n                                    flag = true;\n                                } else {\n                                    layer = blocks.filter(a => foundids.includes(a.parent));\n                                    foundids = [];\n                                }\n                            }\n                            for (var i = 0; i < blocks.filter(a => a.parent == blockid).length; i++) {\n                                var blocknumber = blocks.filter(a => a.parent == blockid)[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            for (var i = 0; i < allids.length; i++) {\n                                var blocknumber = allids[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            if (blocks.length > 1) {\n                                rearrangeMe();\n                            }\n                            if (lastevent) {\n                                fixOffset();\n                            }\n                        }\n                    }\n                }\n                $(document).off(\"mouseup mousemove\", handler);\n            });\n        });\n        $(document).on(\"mousemove\", function(event) {\n            if (active) {\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            } else if (rearrange) {\n                drag.css(\"left\", event.clientX - dragx - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                drag.css(\"top\", event.clientY - dragy - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).y = drag.offset().left + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n            }\n            if (active || rearrange) {\n                var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                var ypos = drag.offset().top + canvas_div.scrollTop();\n                var blocko = blocks.map(a => a.id);\n                for (var i = 0; i < blocks.length; i++) {\n                    if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                        $(\".indicator\").appendTo($(\".blockid[value=\" + blocko[i] + \"]\").parent());\n                        $(\".indicator\").css(\"left\", ($(\".blockid[value=\" + blocko[i] + \"]\").parent().innerWidth() / 2) - 5 + \"px\");\n                        $(\".indicator\").css(\"top\", $(\".blockid[value=\" + blocko[i] + \"]\").parent().innerHeight() + \"px\");\n                        $(\".indicator\").removeClass(\"invisible\");\n                        break;\n                    } else if (i == blocks.length - 1) {\n                        if (!$(\".indicator\").hasClass(\"invisible\")) {\n                            $(\".indicator\").addClass(\"invisible\");\n                        }\n                    }\n                }\n            }\n        })\n\n        function checkOffset() {\n            offsetleft = blocks.map(a => a.x);\n            var widths = blocks.map(a => a.width);\n            var mathmin = offsetleft.map(function(item, index) {\n                return item - (widths[index] / 2);\n            })\n            offsetleft = Math.min.apply(Math, mathmin);\n            if (offsetleft < canvas_div.offset().left) {\n                lastevent = true;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleft + 20);\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - offsetleft + 20 - 5) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - offsetleft + 20 + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    blocks[w].x = $(\".blockid[value=\" + blocks[w].id + \"]\").parent().offset().left + canvas_div.offset().left - ($(\".blockid[value=\" + blocks[w].id + \"]\").parent().innerWidth() / 2) - 40;\n                }\n                offsetleftold = offsetleft;\n            }\n        }\n\n        function fixOffset() {\n            if (offsetleftold < canvas_div.offset().left) {\n                lastevent = false;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleftold - 20);\n                    blocks.filter(a => a.id == blocko[w])[0].x = $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().offset().left + (blocks.filter(a => a.id == blocko[w])[0].width / 2);\n\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - 5 - canvas_div.offset().left) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    //blocks[w].x = blocks[w].x+offsetleftold-20;\n                }\n                offsetleftold = 0;\n            }\n        }\n\n        function rearrangeMe() {\n            var result = blocks.map(a => a.parent);\n            for (var z = 0; z < result.length; z++) {\n                if (result[z] == -1) {\n                    z++;\n                }\n                var totalwidth = 0;\n                var totalremove = 0;\n                var maxheight = 0;\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    if (blocks.filter(id => id.parent == children.id).length == 0) {\n                        children.childwidth = 0;\n                    }\n                    if (children.childwidth > children.width) {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.childwidth;\n                        } else {\n                            totalwidth += children.childwidth + paddingx;\n                        }\n                    } else {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.width;\n                        } else {\n                            totalwidth += children.width + paddingx;\n                        }\n                    }\n                }\n                if (result[z] != -1) {\n                    blocks.filter(a => a.id == result[z])[0].childwidth = totalwidth;\n                }\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"top\", blocks.filter(id => id.id == result[z]).y + paddingy + \"px\");\n                    blocks.filter(id => id.id == result[z]).y = blocks.filter(id => id.id == result[z]).y + paddingy;\n                    if (children.childwidth > children.width) {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                        totalremove += children.childwidth + paddingx;\n                    } else {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                        totalremove += children.width + paddingx;\n                    }\n                    var arrowhelp = blocks.filter(a => a.id == children.id)[0];\n                    var arrowx = arrowhelp.x - blocks.filter(a => a.id == children.parent)[0].x + 20;\n                    var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(a => a.id == children.parent)[0].y + (blocks.filter(a => a.id == children.parent)[0].height / 2));\n                    $('.arrowid[value=' + children.id + ']').parent().css(\"top\", blocks.filter(id => id.id == children.parent)[0].y + (blocks.filter(id => id.id == children.parent)[0].height / 2) - canvas_div.offset().top + \"px\");\n                    if (arrowx < 0) {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    } else {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", blocks.filter(id => id.id == children.parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    }\n                }\n            }\n        }\n    });\n\n    function blockGrabbed(block) {\n        grab(block);\n    }\n\n    function blockReleased() {\n        release();\n    }\n\n    function blockSnap(drag) {\n        snapping(drag);\n    }\n}\n\n// 模块导出支持（用于测试覆盖率追踪）\n// 这不会影响浏览器中的使用，因为 module 在浏览器中未定义\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = flowy;\n}\n"],"names":["flowy","canvas","grab","release","snapping","spacing_x","spacing_y","blockSnap","drag","$","document","ready","blockManager","BlockManager","blocks","getAllBlocks","blockstemp","getTempBlocks","canvas_div","getBlockCount","length","dragx","dragy","original","active","paddingx","paddingy","offsetleft","offsetleftold","rearrange","lastevent","checkOffset","map","a","x","widths","width","mathmin","item","index","Math","min","apply","offset","left","blocko","id","w","filter","parent","css","arrowhelp","innerWidth","rearrangeMe","result","z","totalwidth","totalremove","children","childwidth","y","arrowx","arrowy","height","top","html","append","output","json_data","i","push","data","each","json_name","this","attr","json_value","val","name","value","deleteBlocks","on","event","which","newBlockId","clone","addClass","removeClass","appendTo","getNextBlockId","max","block","clientX","clientY","hasClass","parseInt","scrollLeft","scrollTop","innerHeight","merge","remove","xpos","ypos","after","flag","idval","zwidth","handler","type","blockid","grep","e","layer","foundids","allids","includes","blocknumber","fixOffset","off","module","exports"],"mappings":"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"}