{"version":3,"file":"flowy.es.js","sources":["../src/flowy.js"],"sourcesContent":["// 导入模块\n// 在浏览器环境中，模块会被自动加载到window对象\n// 在Node.js测试环境中，通过require加载\n// - DomUtils: DOM操作工具\n// - BlockManager: 块管理模块\n\nvar flowy = function(canvas, grab, release, snapping, spacing_x, spacing_y) {\n    if (!grab) {\n        grab = function() {};\n    }\n    if (!release) {\n        release = function() {};\n    }\n    if (!snapping) {\n        snapping = function() {};\n    }\n    if (!spacing_x) {\n        spacing_x = 20;\n    }\n    if (!spacing_y) {\n        spacing_y = 80;\n    }\n    $(document).ready(function() {\n        // 创建块管理器实例\n        var blockManager = (typeof BlockManager !== 'undefined') ? new BlockManager() : null;\n\n        // 保持原有变量作为引用，确保向后兼容\n        var blocks = blockManager ? blockManager.getAllBlocks() : [];\n        var blockstemp = blockManager ? blockManager.getTempBlocks() : [];\n        var canvas_div = canvas;\n\n        // 辅助函数：获取块数量（兼容原有代码）\n        function getBlockCount() {\n            return blockManager ? blockManager.getBlockCount() : blocks.length;\n        }\n\n        // 辅助函数：获取下一个块ID\n        function getNextBlockId() {\n            if (blockManager) {\n                return blockManager.getNextBlockId();\n            } else {\n                return blocks.length === 0 ? 0 : Math.max.apply(Math, blocks.map(a => a.id)) + 1;\n            }\n        }\n\n        // 辅助函数：清空所有块\n        function clearAllBlocks() {\n            if (blockManager) {\n                blockManager.clearBlocks();\n                // 同时清空引用数组以保持同步\n                blocks.length = 0;\n            } else {\n                blocks = [];\n            }\n        }\n\n        // 辅助函数：添加块\n        function addBlock(blockData) {\n            if (blockManager) {\n                blockManager.addBlock(blockData);\n                // 同时添加到引用数组以保持同步\n                blocks.push(blockData);\n            } else {\n                blocks.push(blockData);\n            }\n        }\n        var active = false;\n        var paddingx = spacing_x;\n        var paddingy = spacing_y;\n        var offsetleft = 0;\n        var offsetleftold = 0;\n        var rearrange = false;\n        var lastevent = false;\n        var drag, dragx, dragy, original;\n        // 添加条件检查，确保 canvas_div 存在且有 append 方法\n        if (canvas_div && typeof canvas_div.append === 'function') {\n            canvas_div.append(\"<div class='indicator invisible'></div>\");\n        }\n        flowy.output = function() {\n            var json_data = [];\n            if (blocks.length > 0) {\n                for (var i = 0; i < blocks.length; i++) {\n                    json_data.push({\n                        id: blocks[i].id,\n                        parent: blocks[i].parent,\n                        data: []\n                    });\n                    $(\".blockid[value=\" + blocks[i].id + \"]\").parent().children(\"input\").each(function() {\n                        var json_name = $(this).attr(\"name\");\n                        var json_value = $(this).val();\n                        json_data[i].data.push({\n                            name: json_name,\n                            value: json_value\n                        });\n                    })\n                }\n                return json_data;\n            }\n        }\n        flowy.deleteBlocks = function() {\n            clearAllBlocks();\n            canvas_div.html(\"<div class='indicator invisible'></div>\");\n        }\n        $(document).on(\"mousedown\", \".create-flowy\", function(event) {\n            if (event.which === 1) {\n                original = $(this);\n                if (getBlockCount() == 0) {\n                    var newBlockId = getBlockCount(); // 当blocks为空时，使用0作为第一个ID\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + newBlockId + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + newBlockId + \"]\").parent();\n                } else {\n                    var newBlockId = getNextBlockId();\n                    $(this).clone().addClass('block').append(\"<input type='hidden' name='blockid' class='blockid' value='\" + newBlockId + \"'>\").removeClass(\"create-flowy\").appendTo(\"body\");\n                    $(this).addClass(\"dragnow\");\n                    drag = $(\".blockid[value=\" + newBlockId + \"]\").parent();\n                }\n                blockGrabbed($(this));\n                drag.addClass(\"dragging\");\n                active = true;\n                dragx = event.clientX - $(this).offset().left;\n                dragy = event.clientY - $(this).offset().top;\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            }\n        });\n        $(document).on(\"mouseup\", function(event) {\n            if (event.which === 1 && (active || rearrange)) {\n                blockReleased();\n                if (!$(\".indicator\").hasClass(\"invisible\")) {\n                    $(\".indicator\").addClass(\"invisible\");\n                }\n                if (active) {\n                    original.removeClass(\"dragnow\");\n                    drag.removeClass(\"dragging\");\n                }\n                if (parseInt(drag.children(\".blockid\").val()) == 0 && rearrange) {\n                    drag.removeClass(\"dragging\");\n                    rearrange = false;\n                    for (var w = 0; w < blockstemp.length; w++) {\n                        if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                            $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                            $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                            blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                            blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                        }\n                    }\n                    blockstemp.filter(a => a.id == 0)[0].x = drag.offset().left + (drag.innerWidth() / 2);\n                    blockstemp.filter(a => a.id == 0)[0].y = drag.offset().top + (drag.innerHeight() / 2);\n                    blocks = $.merge(blocks, blockstemp);\n                    blockstemp = [];\n                } else if (active && blocks.length == 0 && drag.offset().top > canvas_div.offset().top && drag.offset().left > canvas_div.offset().left) {\n                    blockSnap(drag);\n                    active = false;\n                    drag.css(\"top\", drag.offset().top - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                    drag.css(\"left\", drag.offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                    drag.appendTo(canvas_div);\n                    addBlock({\n                        parent: -1,\n                        childwidth: 0,\n                        id: parseInt(drag.children(\".blockid\").val()),\n                        x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                        y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                        width: drag.innerWidth(),\n                        height: drag.innerHeight()\n                    });\n                } else if (active && blocks.length == 0) {\n                    drag.remove();\n                } else if (active || rearrange) {\n                    var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                    var ypos = drag.offset().top + canvas_div.scrollTop();\n                    var blocko = blocks.map(a => a.id);\n                    for (var i = 0; i < blocks.length; i++) {\n                        if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                            active = false;\n                            if (!rearrange) {\n                                blockSnap(drag);\n                                drag.appendTo(canvas_div);\n                            }\n                            var totalwidth = 0;\n                            var totalremove = 0;\n                            var maxheight = 0;\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    totalwidth += children.childwidth + paddingx;\n                                } else {\n                                    totalwidth += children.width + paddingx;\n                                }\n                            }\n                            totalwidth += drag.innerWidth();\n                            for (var w = 0; w < blocks.filter(id => id.parent == blocko[i]).length; w++) {\n                                var children = blocks.filter(id => id.parent == blocko[i])[w];\n                                if (children.childwidth > children.width) {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                                    totalremove += children.childwidth + paddingx;\n                                } else {\n                                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - (totalwidth / 2) + totalremove + \"px\");\n                                    children.x = blocks.filter(id => id.parent == blocko[i])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                                    totalremove += children.width + paddingx;\n                                }\n                            }\n                            drag.css(\"left\", blocks.filter(id => id.id == blocko[i])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            drag.css(\"top\", blocks.filter(id => id.id == blocko[i])[0].y + (blocks.filter(id => id.id == blocko[i])[0].height / 2) + paddingy - canvas_div.offset().top + \"px\");\n                            if (rearrange) {\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft() + canvas_div.scrollLeft();\n                                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0].y = drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n                                blockstemp.filter(a => a.id == drag.children(\".blockid\").val())[0].parent = blocko[i];\n                                for (var w = 0; w < blockstemp.length; w++) {\n                                    if (blockstemp[w].id != parseInt(drag.children(\".blockid\").val())) {\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().left - canvas_div.offset().left + canvas_div.scrollLeft() + 20);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().offset().top - canvas_div.offset().top + canvas_div.scrollTop());\n                                        $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n                                        $(\".arrowid[value=\" + blockstemp[w].id + \"]\").parent().appendTo(canvas_div);\n\n                                        blockstemp[w].x = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().left + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").innerWidth() / 2) + canvas_div.scrollLeft();\n                                        blockstemp[w].y = $(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().offset().top + ($(\".blockid[value=\" + blockstemp[w].id + \"]\").parent().innerHeight() / 2) + canvas_div.scrollTop();\n\n                                    }\n                                }\n                                blocks = $.merge(blocks, blockstemp);\n                                blockstemp = [];\n                            } else {\n                                addBlock({\n                                    childwidth: 0,\n                                    parent: blocko[i],\n                                    id: parseInt(drag.children(\".blockid\").val()),\n                                    x: drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft(),\n                                    y: drag.offset().top + (drag.innerHeight() / 2) + canvas_div.scrollTop(),\n                                    width: drag.innerWidth(),\n                                    height: drag.innerHeight()\n                                });\n                            }\n                            var arrowhelp = blocks.filter(a => a.id == parseInt(drag.children(\".blockid\").val()))[0];\n                            var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocko[i])[0].x + 20;\n                            var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(id => id.parent == blocko[i])[0].y + (blocks.filter(id => id.parent == blocko[i])[0].height / 2)) + canvas_div.scrollTop();\n                            if (arrowx < 0) {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(a => a.id == blocko[i])[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + drag.children(\".blockid\").val() + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            } else {\n                                drag.after('<div class=\"arrowblock\"><input type=\"hidden\" class=\"arrowid\" value=\"' + drag.children(\".blockid\").val() + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg></div>');\n                                $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"left\", blocks.filter(a => a.id == blocko[i])[0].x - 20 - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                            }\n                            $('.arrowid[value=' + parseInt(drag.children(\".blockid\").val()) + ']').parent().css(\"top\", blocks.filter(a => a.id == blocko[i])[0].y + (blocks.filter(a => a.id == blocko[i])[0].height / 2) + \"px\");\n                            if (blocks.filter(a => a.id == blocko[i])[0].parent != -1) {\n                                var flag = false;\n                                var idval = blocko[i];\n                                while (!flag) {\n                                    if (blocks.filter(a => a.id == idval)[0].parent == -1) {\n                                        flag = true;\n                                    } else {\n                                        var zwidth = 0;\n                                        for (var w = 0; w < blocks.filter(id => id.parent == idval).length; w++) {\n                                            var children = blocks.filter(id => id.parent == idval)[w];\n                                            if (children.childwidth > children.width) {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.childwidth;\n                                                } else {\n                                                    zwidth += children.childwidth + paddingx;\n                                                }\n                                            } else {\n                                                if (w == blocks.filter(id => id.parent == idval).length - 1) {\n                                                    zwidth += children.width;\n                                                } else {\n                                                    zwidth += children.width + paddingx;\n                                                }\n                                            }\n                                        }\n                                        blocks.filter(a => a.id == idval)[0].childwidth = zwidth;\n                                        idval = blocks.filter(a => a.id == idval)[0].parent;\n                                    }\n                                }\n                                blocks.filter(id => id.id == idval)[0].childwidth = totalwidth;\n                            }\n                            if (rearrange) {\n                                rearrange = false;\n                                drag.removeClass(\"dragging\");\n                            }\n                            rearrangeMe();\n                            checkOffset();\n                            break;\n                        } else if (i == blocks.length - 1) {\n                            if (rearrange) {\n                                rearrange = false;\n                                blockstemp = [];\n                            }\n                            active = false;\n                            drag.remove();\n                        }\n                    }\n                }\n            }\n        });\n        $(document).on(\"mousedown\", \".block\", function(event) {\n            $(document).on(\"mouseup mousemove\", \".block\", function handler(event) {\n                if (event.type !== \"mouseup\") {\n                    if (event.which === 1) {\n                        if (!active && !rearrange) {\n                            rearrange = true;\n                            drag = $(this);\n                            drag.addClass(\"dragging\");\n                            dragx = event.clientX - $(this).offset().left;\n                            dragy = event.clientY - $(this).offset().top;\n                            var blockid = parseInt($(this).children(\".blockid\").val());\n                            drag = $(this);\n                            blockstemp.push(blocks.filter(a => a.id == blockid)[0]);\n                            blocks = $.grep(blocks, function(e) {\n                                return e.id != blockid\n                            });\n                            $(\".arrowid[value=\" + blockid + \"]\").parent().remove();\n                            var layer = blocks.filter(a => a.parent == blockid);\n                            var flag = false;\n                            var foundids = [];\n                            var allids = [];\n                            while (!flag) {\n                                for (var i = 0; i < layer.length; i++) {\n                                    blockstemp.push(blocks.filter(a => a.id == layer[i].id)[0]);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".blockid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"left\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().left - drag.offset().left);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().css(\"top\", $(\".arrowid[value=\" + layer[i].id + \"]\").parent().offset().top - drag.offset().top);\n                                    $(\".blockid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    $(\".arrowid[value=\" + layer[i].id + \"]\").parent().appendTo(drag);\n                                    foundids.push(layer[i].id);\n                                    allids.push(layer[i].id);\n                                }\n                                if (foundids.length == 0) {\n                                    flag = true;\n                                } else {\n                                    layer = blocks.filter(a => foundids.includes(a.parent));\n                                    foundids = [];\n                                }\n                            }\n                            for (var i = 0; i < blocks.filter(a => a.parent == blockid).length; i++) {\n                                var blocknumber = blocks.filter(a => a.parent == blockid)[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            for (var i = 0; i < allids.length; i++) {\n                                var blocknumber = allids[i];\n                                blocks = $.grep(blocks, function(e) {\n                                    return e.id != blocknumber\n                                });\n                            }\n                            if (blocks.length > 1) {\n                                rearrangeMe();\n                            }\n                            if (lastevent) {\n                                fixOffset();\n                            }\n                        }\n                    }\n                }\n                $(document).off(\"mouseup mousemove\", handler);\n            });\n        });\n        $(document).on(\"mousemove\", function(event) {\n            if (active) {\n                drag.css(\"left\", event.clientX - dragx + \"px\");\n                drag.css(\"top\", event.clientY - dragy + \"px\");\n            } else if (rearrange) {\n                drag.css(\"left\", event.clientX - dragx - canvas_div.offset().left + canvas_div.scrollLeft() + \"px\");\n                drag.css(\"top\", event.clientY - dragy - canvas_div.offset().top + canvas_div.scrollTop() + \"px\");\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).x = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                blockstemp.filter(a => a.id == parseInt(drag.children(\".blockid\").val())).y = drag.offset().left + (drag.innerHeight() / 2) + canvas_div.scrollTop();\n            }\n            if (active || rearrange) {\n                var xpos = drag.offset().left + (drag.innerWidth() / 2) + canvas_div.scrollLeft();\n                var ypos = drag.offset().top + canvas_div.scrollTop();\n                var blocko = blocks.map(a => a.id);\n                for (var i = 0; i < blocks.length; i++) {\n                    if (xpos >= blocks.filter(a => a.id == blocko[i])[0].x - (blocks.filter(a => a.id == blocko[i])[0].width / 2) - paddingx && xpos <= blocks.filter(a => a.id == blocko[i])[0].x + (blocks.filter(a => a.id == blocko[i])[0].width / 2) + paddingx && ypos >= blocks.filter(a => a.id == blocko[i])[0].y - (blocks.filter(a => a.id == blocko[i])[0].height / 2) && ypos <= blocks.filter(a => a.id == blocko[i])[0].y + blocks.filter(a => a.id == blocko[i])[0].height) {\n                        $(\".indicator\").appendTo($(\".blockid[value=\" + blocko[i] + \"]\").parent());\n                        $(\".indicator\").css(\"left\", ($(\".blockid[value=\" + blocko[i] + \"]\").parent().innerWidth() / 2) - 5 + \"px\");\n                        $(\".indicator\").css(\"top\", $(\".blockid[value=\" + blocko[i] + \"]\").parent().innerHeight() + \"px\");\n                        $(\".indicator\").removeClass(\"invisible\");\n                        break;\n                    } else if (i == blocks.length - 1) {\n                        if (!$(\".indicator\").hasClass(\"invisible\")) {\n                            $(\".indicator\").addClass(\"invisible\");\n                        }\n                    }\n                }\n            }\n        })\n\n        function checkOffset() {\n            offsetleft = blocks.map(a => a.x);\n            var widths = blocks.map(a => a.width);\n            var mathmin = offsetleft.map(function(item, index) {\n                return item - (widths[index] / 2);\n            })\n            offsetleft = Math.min.apply(Math, mathmin);\n            if (offsetleft < canvas_div.offset().left) {\n                lastevent = true;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleft + 20);\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - offsetleft + 20 - 5) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - offsetleft + 20 + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    blocks[w].x = $(\".blockid[value=\" + blocks[w].id + \"]\").parent().offset().left + canvas_div.offset().left - ($(\".blockid[value=\" + blocks[w].id + \"]\").parent().innerWidth() / 2) - 40;\n                }\n                offsetleftold = offsetleft;\n            }\n        }\n\n        function fixOffset() {\n            if (offsetleftold < canvas_div.offset().left) {\n                lastevent = false;\n                var blocko = blocks.map(a => a.id);\n                for (var w = 0; w < blocks.length; w++) {\n                    $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().css(\"left\", blocks.filter(a => a.id == blocko[w])[0].x - (blocks.filter(a => a.id == blocko[w])[0].width / 2) - offsetleftold - 20);\n                    blocks.filter(a => a.id == blocko[w])[0].x = $(\".blockid[value=\" + blocks.filter(a => a.id == blocko[w])[0].id + \"]\").parent().offset().left + (blocks.filter(a => a.id == blocko[w])[0].width / 2);\n\n                    if (blocks.filter(a => a.id == blocko[w])[0].parent != -1) {\n                        var arrowhelp = blocks.filter(a => a.id == blocko[w])[0];\n                        var arrowx = arrowhelp.x - blocks.filter(a => a.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x;\n                        if (arrowx < 0) {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", (arrowhelp.x - 5 - canvas_div.offset().left) + \"px\");\n                        } else {\n                            $('.arrowid[value=' + blocko[w] + ']').parent().css(\"left\", blocks.filter(id => id.id == blocks.filter(a => a.id == blocko[w])[0].parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        }\n                    }\n                }\n                for (var w = 0; w < blocks.length; w++) {\n                    //blocks[w].x = blocks[w].x+offsetleftold-20;\n                }\n                offsetleftold = 0;\n            }\n        }\n\n        function rearrangeMe() {\n            var result = blocks.map(a => a.parent);\n            for (var z = 0; z < result.length; z++) {\n                if (result[z] == -1) {\n                    z++;\n                }\n                var totalwidth = 0;\n                var totalremove = 0;\n                var maxheight = 0;\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    if (blocks.filter(id => id.parent == children.id).length == 0) {\n                        children.childwidth = 0;\n                    }\n                    if (children.childwidth > children.width) {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.childwidth;\n                        } else {\n                            totalwidth += children.childwidth + paddingx;\n                        }\n                    } else {\n                        if (w == blocks.filter(id => id.parent == result[z]).length - 1) {\n                            totalwidth += children.width;\n                        } else {\n                            totalwidth += children.width + paddingx;\n                        }\n                    }\n                }\n                if (result[z] != -1) {\n                    blocks.filter(a => a.id == result[z])[0].childwidth = totalwidth;\n                }\n                for (var w = 0; w < blocks.filter(id => id.parent == result[z]).length; w++) {\n                    var children = blocks.filter(id => id.parent == result[z])[w];\n                    $(\".blockid[value=\" + children.id + \"]\").parent().css(\"top\", blocks.filter(id => id.id == result[z]).y + paddingy + \"px\");\n                    blocks.filter(id => id.id == result[z]).y = blocks.filter(id => id.id == result[z]).y + paddingy;\n                    if (children.childwidth > children.width) {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2) - (children.width / 2) - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.childwidth / 2);\n                        totalremove += children.childwidth + paddingx;\n                    } else {\n                        $(\".blockid[value=\" + children.id + \"]\").parent().css(\"left\", blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove - canvas_div.offset().left + \"px\");\n                        children.x = blocks.filter(id => id.id == result[z])[0].x - (totalwidth / 2) + totalremove + (children.width / 2);\n                        totalremove += children.width + paddingx;\n                    }\n                    var arrowhelp = blocks.filter(a => a.id == children.id)[0];\n                    var arrowx = arrowhelp.x - blocks.filter(a => a.id == children.parent)[0].x + 20;\n                    var arrowy = arrowhelp.y - (arrowhelp.height / 2) - (blocks.filter(a => a.id == children.parent)[0].y + (blocks.filter(a => a.id == children.parent)[0].height / 2));\n                    $('.arrowid[value=' + children.id + ']').parent().css(\"top\", blocks.filter(id => id.id == children.parent)[0].y + (blocks.filter(id => id.id == children.parent)[0].height / 2) - canvas_div.offset().top + \"px\");\n                    if (arrowx < 0) {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", (arrowhelp.x - 5) - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' 0L' + (blocks.filter(id => id.id == children.parent)[0].x - arrowhelp.x + 5) + ' ' + (paddingy / 2) + 'L5 ' + (paddingy / 2) + 'L5 ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M0 ' + (arrowy - 5) + 'H10L5 ' + arrowy + 'L0 ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    } else {\n                        $('.arrowid[value=' + children.id + ']').parent().css(\"left\", blocks.filter(id => id.id == children.parent)[0].x - 20 - canvas_div.offset().left + \"px\");\n                        $('.arrowid[value=' + children.id + ']').parent().html('<input type=\"hidden\" class=\"arrowid\" value=\"' + children.id + '\"><svg preserveaspectratio=\"none\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M20 0L20 ' + (paddingy / 2) + 'L' + (arrowx) + ' ' + (paddingy / 2) + 'L' + arrowx + ' ' + arrowy + '\" stroke=\"#C5CCD0\" stroke-width=\"2px\"/><path d=\"M' + (arrowx - 5) + ' ' + (arrowy - 5) + 'H' + (arrowx + 5) + 'L' + arrowx + ' ' + arrowy + 'L' + (arrowx - 5) + ' ' + (arrowy - 5) + 'Z\" fill=\"#C5CCD0\"/></svg>');\n                    }\n                }\n            }\n        }\n    });\n\n    function blockGrabbed(block) {\n        grab(block);\n    }\n\n    function blockReleased() {\n        release();\n    }\n\n    function blockSnap(drag) {\n        snapping(drag);\n    }\n}\n\n// 模块导出支持（用于测试覆盖率追踪）\n// 这不会影响浏览器中的使用，因为 module 在浏览器中未定义\nif (typeof module !== 'undefined' && module.exports) {\n    module.exports = flowy;\n}\n"],"names":["event","a"],"mappings":"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"}